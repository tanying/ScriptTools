#!/usr/bin/python
#Output Bundled Packages Excel Table
#ying.tan@tcl.com

import os
import sys
import re
import time
import shutil
import codecs

pmlistPath='./pmlist.txt'

def main():
	if sys.argc < 2:
		print "The tempapk directory can not be empty.\n"
	else:
		file = open(pmlistPath, 'r')
		while True:
			line = file.readline()
			if not line:
				break
			slashIndex = line.find('/')
			if slashIndex > -1:
				equalIndex = line.rfind('=')
				if equalIndex > -1:
					fullPath = line[slashIndex:equalIndex]
					packageName = line[equalIndex+1:]
					os.system('adb pull %s %s' % (fullPath , sys.argv[1]+'/'+packageName+'.apk')

if __name__ == '__main__':
	main()